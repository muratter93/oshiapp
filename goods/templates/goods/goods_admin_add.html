{% extends "dashboard/dashboard_base.html" %}
{% load static %}

{% block title %}新しいグッズを登録{% endblock %}
{% block content_title %}新しいグッズを登録{% endblock %}

{% block content %}
<div class="card goods-create">
  <div class="container">

    {# メッセージ #}
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    {# フォーム全体 #}
    <form method="post" enctype="multipart/form-data" novalidate>
      {% csrf_token %}

      <div class="form-grid" style="display:grid; gap:12px; max-width:520px;">

        <label>
          グッズ名
          {{ form.name }}
          {% if form.name.errors %}
            <div class="field-error">{{ form.name.errors.0 }}</div>
          {% endif %}
        </label>

        <label>
          必要スタポ
          {{ form.required_stanning_points }}
          {% if form.required_stanning_points.errors %}
            <div class="field-error">{{ form.required_stanning_points.errors.0 }}</div>
          {% endif %}
        </label>

        <label>
          在庫数
          {{ form.stock }}
          {% if form.stock.errors %}
            <div class="field-error">{{ form.stock.errors.0 }}</div>
          {% endif %}
        </label>

        <label>
          サムネ画像
          {{ form.image }}
          {% if form.image.errors %}
            <div class="field-error">{{ form.image.errors.0 }}</div>
          {% endif %}
        </label>

        {# 説明がある想定のフィールド名。違うならここだけ変えてね #}
        {% if form.description %}
        <label class="full">
          説明文
          {{ form.description }}
          {% if form.description.errors %}
            <div class="field-error">{{ form.description.errors.0 }}</div>
          {% endif %}
        </label>
        {% endif %}

        {# 詳細画像（複数） #}
        <label class="full">
          詳細画像（複数選択可）
          <input type="file" name="detail_images" id="id_detail_images" multiple>
        </label>

      </div>

      <div class="form-actions" style="display:flex; gap:8px; margin-top:16px;">
        <button class="btn btn-edit" type="submit">登録する</button>
        <a class="btn" href="{% url 'goods:goods_admin_list' %}">一覧に戻る</a>
      </div>
    </form>

  </div>
</div>
{% endblock %}
