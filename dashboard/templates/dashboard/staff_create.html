{% extends "dashboard/dashboard_base.html" %}

{% block title %}新しい管理者を登録{% endblock %}
{% block content_title %}新しい管理者を登録{% endblock %}

{% block content %}
<div class="card staff-create">
  <div class="container">

    {% if form.non_field_errors %}
      <div class="form-errors">
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}

      <div class="form-grid" style="display:grid; gap:12px; max-width:520px;">
        <label>
          ユーザー名
          {{ form.username }}
          {% if form.username.errors %}<div class="field-error">{{ form.username.errors.0 }}</div>{% endif %}
        </label>

        <label>
          メール
          {{ form.email }}
          {% if form.email.errors %}<div class="field-error">{{ form.email.errors.0 }}</div>{% endif %}
        </label>

        <label>
          パスワード
          {{ form.password1 }}
          {% if form.password1.errors %}<div class="field-error">{{ form.password1.errors.0 }}</div>{% endif %}
        </label>

        <label>
          パスワード（確認）
          {{ form.password2 }}
          {% if form.password2.errors %}<div class="field-error">{{ form.password2.errors.0 }}</div>{% endif %}
        </label>
              
        <details class="optional-section" style="margin-top:8px;">
        <summary class="optional-summary">追加のプロフィール情報（任意）</summary>

        <div class="optional-grid" style="display:grid; gap:12px; margin-top:10px;">
          <label>
            氏名（任意）
            {{ form.name }}
            {% if form.name.errors %}<div class="field-error">{{ form.name.errors.0 }}</div>{% endif %}
          </label>

          <label>
            生年月日（任意）
            {{ form.birth }}
            {% if form.birth.errors %}<div class="field-error">{{ form.birth.errors.0 }}</div>{% endif %}
          </label>

          <label>
            郵便番号（任意）
            {{ form.postal_code }}
            {% if form.postal_code.errors %}<div class="field-error">{{ form.postal_code.errors.0 }}</div>{% endif %}
          </label>

          <label>
            住所（任意）
            {{ form.address }}
            {% if form.address.errors %}<div class="field-error">{{ form.address.errors.0 }}</div>{% endif %}
          </label>

          <label>
            電話番号（任意）
            {{ form.phone }}
            {% if form.phone.errors %}<div class="field-error">{{ form.phone.errors.0 }}</div>{% endif %}
          </label>
        </div>
      </details>

        <p class="subtle">※ このユーザーは「管理者（is_staff）」として作成されます（最高管理者にはなりません）。</p>

        <div class="form-actions" style="display:flex; gap:8px;">
          <button class="btn btn-edit" type="submit">管理者を登録する</button>
          <a class="btn" href="{% url 'dashboard:admins_list' %}">一覧へ戻る</a>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
