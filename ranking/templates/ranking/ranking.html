{% extends "common/base.html" %}
{% load static %}

{% block title %}
    アニマルランキング | アニマルマニア
{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/ranking.css' %}">

<section class="text-center container" style="padding-top:0px;">
    <div class="col-lg-8 col-md-10 mx-auto">
        <h1 class="fw-light" style="text-align:center; font-size:3em; margin-bottom:40px;">
            アニマル『 推し! 』ランキング
        </h1>
        {% if not is_page_1 %}
            <h2 style="font-size: 1.5em; margin-bottom: 20px;">
                {{ actual_page_num }}ページ目 ({{ start_rank }}位 〜)
            </h2>
        {% endif %}
    </div>
</section>

<div class="ranking-container">

    {% if is_page_1 %}
        {% with a=animals.0 %}
        {% if a %}
        <div class="rank-1 rank-card">
            <h2>第1位 {{ a.japanese }}</h2>
            <a href="/animals/{{ a.animal_id }}/">
                <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
        </div>
        {% endif %}
        {% endwith %}

        <div class="rank-2-3">
            {% for a in animals|slice:"1:3" %}
            <div class="rank-card">
                <h3>第{{ forloop.counter|add:1 }}位 {{ a.japanese }}</h3>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% endfor %}
        </div>

        <div class="rank-4-6">
            {% for a in animals|slice:"3:6" %}
            <div class="rank-card">
                <h4>第{{ forloop.counter|add:3 }}位 {{ a.japanese }}</h4>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% endfor %}
        </div>

        <div class="rank-7-10">
            {% for a in animals|slice:"6:10" %}
            <div class="rank-card">
                <h5>第{{ forloop.counter|add:6 }}位 {{ a.japanese }}</h5>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% endfor %}
        </div>

        <div class="rank-11-15">
            {% for a in animals|slice:"10:15" %}
            <div class="rank-card">
                <h5>第{{ forloop.counter|add:10 }}位 {{ a.japanese }}</h5>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% endfor %}
        </div>

        <div class="rank-16-20">
            {% for a in animals|slice:"15:20" %}
            <div class="rank-card">
                <h5>第{{ forloop.counter|add:15 }}位 {{ a.japanese }}</h5>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% endfor %}
        </div>

    {% else %}
        <div class="rank-other">
            {% for a in page_obj %}
            <div class="rank-card">
                <h5>第{{ forloop.counter0|add:start_rank }}位 {{ a.japanese }}</h5>
                <a href="/animals/{{ a.animal_id }}/">
                    <img src="{{ a.pic1.url }}" alt="{{ a.japanese }}">
                    <p><strong>{{ a.name }}</strong></a><br>{{ a.total_point }} 推しP</p>
            </div>
            {% empty %}
            <p>該当するどうぶつがいません。</p>
            {% endfor %}
        </div>
    {% endif %}

</div>

{% if total_pages > 1 %}
<div class="pagination">
    <span class="step-links">
        {% if actual_page_num > 1 %}
            <a href="?page={{ actual_page_num|add:'-1' }}">&laquo;</a>
        {% else %}
            <span class="disabled">&laquo;</span>
        {% endif %}

        {% for page_num in page_range %}
            {% if page_num == '...' %}
                <span class="dots">...</span>
            {% elif page_num == actual_page_num %}
                <span class="current">{{ page_num }}</span>
            {% else %}
                <a href="?page={{ page_num }}">{{ page_num }}</a>
            {% endif %}
        {% endfor %}

        {% if actual_page_num < total_pages %}
            <a href="?page={{ actual_page_num|add:'1' }}">&raquo;</a>
        {% else %}
            <span class="disabled">&raquo;</span>
        {% endif %}
    </span>
</div>
{% endif %}


{% endblock %}
